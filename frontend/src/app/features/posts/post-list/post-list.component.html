<div class="feed-container">
  <div class="actions-header">
    <button mat-raised-button color="primary" routerLink="/post">Créer un article</button>
    <button mat-button (click)="toggleSort()" class="sort-button">
      <mat-icon>{{ sortAscending() ? 'arrow_upward' : 'arrow_downward' }}</mat-icon>
      Trier par date
    </button>
  </div>

  <div class="posts-grid">
    <div *ngIf="errorMessage()" class="error-message">
      <p>{{ errorMessage() }}</p>
    </div>

    <mat-card class="post-card" *ngFor="let post of posts()" (click)="navigateToPost(post.id)">
      <mat-card-header>
        <mat-card-title>{{ post.topicName }} - {{ post.title }}</mat-card-title>
        <mat-card-content>
          <mat-card-subtitle> Par {{ post.authorName }} </mat-card-subtitle>
          <mat-card-subtitle>
            {{ post.createdAt | date: 'dd/MM/yyyy à HH:mm' }}
          </mat-card-subtitle>
        </mat-card-content>
      </mat-card-header>

      <mat-card-content>
        <p class="post-content">
          {{ post.content.length > 200 ? (post.content | slice: 0 : 200) + '...' : post.content }}
        </p>
      </mat-card-content>
    </mat-card>

    <div *ngIf="posts().length === 0 && !errorMessage()" class="no-posts">
      <p>Aucun article pour le moment. Soyez le premier à publier !</p>
    </div>
  </div>
</div>
